---
date: 2015-01-10
layout: 'post'
status: 'public'
---

# 关于字符编码

## 编码
先来看一下wiki的解释：

> 编码是信息从一种形式或格式转换为另一种形式的过程也称为计算机编程语言的代码简称编码。用预先规定的方法将文字、数字或其它对象编成数码，或将信息、数据转换成规定的电脉冲信号。编码在电子计算机、电视、遥控和通讯等方面广泛使用。

实际上就是将信息从一种形式转换为另一种形式，这种转换的目的是为了存储，通信，加密等等。
但是，在这里我想要讨论的是字符编码的问题，也就是将文字字符转换为计算机数据的一种转换。

## 字符集
字符集（Charset）：是一个系统支持的所有抽象字符的集合。字符是各种文字和符号的总称，包括各国家文字、标点符号、图形符号、数字等。
由于历史发展的原因，不同的国家和文化之间产生了不同的文字和符号，这就导致了不同的字符集出现,包括我们所说的ASCII， GBK，UNICODE。
通常字符集本身会包含对字符的编码规范，但是对于不同的字符集，可能会有重复的字符，他们在不同的字符集中有不同的编码以及存储大小，导致使用了这些本地字符集的程序在进行语言切换的时候比较麻烦（需要用查找表的方式转换为其他字符集编码），最终产生了Unicode字符集。
## ANSI
ANSI实际上是各个不同国家、文化独立制定的本地字符集。
对于英文系统，ANSI就是ASCII
对于中文系统，ANSI就是GBK
对于日文系统，ANSI就是。。。
。。。
## ASCII
ASCII码一共规定了128个字符的编码，比如空格“SPACE”是32（二进制00100000），大写的字母A是65（二进制01000001）。这128个符号（包括32个不能打印出来的控制符号），只占用了一个字节的后面7位，最前面的1位统一规定为0。
#GBK 全角 半角
对于英文来说一个字节就可以表示所有字符了，但是对于中文，常用汉字就有6000多个，显然一个字节已经不够用了，于是中国人民规定：一个小于127的字符的意义与原来相同，但两个大于127的字符连在一起时，就表示一个汉字，前面的一个字节（他称之为高字节）从0xA1用到 0xF7，后面一个字节（低字节）从0xA1到0xFE，这样我们就可以组合出大约7000多个简体汉字了。在这些编码里，我们还把数学符号、罗马希腊的字母、日文的假名们都编进去了，连在 ASCII 里本来就有的数字、标点、字母都统统重新编了两个字节长的编码，这就是常说的”全角”字符，而原来在127号以下的那些就叫”半角”字符了，这就是GB2312。
 但是中国的汉字太多了，我们很快就就发现有许多人的人名没有办法在这里打出来，于是就有了GBK，GBK包括了GB2312 的所有内容，同时又增加了近20000个新的汉字（包括繁体字）和符号。 后来少数民族也要用电脑了，于是我们再扩展，又加了几千个新的少数民族的字，GBK扩成了 GB18030。
## UNICODE
Unicode字符集的设计目的是统一世界上所有的字符到一个字符集中，当然这个字符集会比较大，而且还在不断的更新中。
Unicode的编码方式（UTF-32）最初是用4个字节来代表一个字符。这就意味着，在使用ASCII的系统中（英文等），原本用1个字节就可以存储的字符，存储空间翻了4倍，造成了极大的浪费。于是，又形成了UTF-8，UTF-16等编码方式来减少存储空间。
## UTF-8
UTF-8就是在互联网上使用最广的一种unicode的实现方式。
UTF-8最大的一个特点，就是它是一种变长的编码方式。它可以使用1~4个字节表示一个符号，根据不同的符号而变化字节长度。
UTF-8的编码规则很简单，只有二条：
1）对于单字节的符号，字节的第一位设为0，后面7位为这个符号的unicode码。因此对于英语字母，UTF-8编码和ASCII码是相同的。
2）对于n字节的符号（n>1），第一个字节的前n位都设为1，第n+1位设为0，后面字节的前两位一律设为10。剩下的没有提及的二进制位，全部为这个符号的unicode码。
下表总结了编码规则，字母x表示可用编码的位。

| Unicode符号范围         | UTF-8编码方式                           |
| ------------------- | ----------------------------------- |
| 0000 0000-0000 007F | 0xxxxxxx                            |
| 0000 0080-0000 07FF | 110xxxxx 10xxxxxx                   |
| 0000 0800-0000 FFFF | 1110xxxx 10xxxxxx 10xxxxxx          |
| 0001 0000-0010 FFFF | 11110xxx 10xxxxxx 10xxxxxx 10xxxxxx |